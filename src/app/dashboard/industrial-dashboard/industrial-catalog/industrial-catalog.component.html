<div class="catalog-container">
    <div class="page-header">
        <button class="back-btn" routerLink="/industrial/home">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>
        <div class="header-text">
            <h2>Fish Lot Catalog</h2>
            <p>Browse available lots and add to cart</p>
        </div>
        <button class="cart-toggle-btn" (click)="toggleCart()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13C6.44772 13 6 13.4477 6 14C6 14.5523 6.44772 15 7 15H19M7 18C6.44772 18 6 18.4477 6 19C6 19.5523 6.44772 20 7 20C7.55228 20 8 19.5523 8 19C8 18.4477 7.55228 18 7 18ZM17 18C16.4477 18 16 18.4477 16 19C16 19.5523 16.4477 20 17 20C17.5523 20 18 19.5523 18 19C18 18.4477 17.5523 18 17 18Z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            Cart
        </button>
    </div>

    <div class="search-bar">
        <div class="search-wrapper">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            <input type="text" placeholder="Search fish lots..." [(ngModel)]="searchTerm">
        </div>
    </div>

    <div class="content-wrapper">
        <div class="catalog-grid" [ngClass]="{'cart-open': showCart}">
            <div class="catalog-card" *ngFor="let lot of fishLots">
                <div class="card-image">
                    <div class="placeholder-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#CBD5E1" stroke-width="2" />
                            <circle cx="8.5" cy="8.5" r="1.5" fill="#CBD5E1" />
                            <polyline points="21 15 16 10 5 21" stroke="#CBD5E1" stroke-width="2" />
                        </svg>
                    </div>
                </div>

                <div class="card-content">
                    <div class="card-header">
                        <h3>{{lot.name}}</h3>
                        <span class="badge badge-success" *ngIf="lot.inStock">In Stock</span>
                        <span class="badge badge-warning" *ngIf="lot.limited">Limited</span>
                    </div>

                    <p class="supplier">by {{lot.supplier}}</p>

                    <div class="rating">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="#FBBF24"
                            xmlns="http://www.w3.org/2000/svg">
                            <polygon
                                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                        </svg>
                        <span>{{lot.rating}}</span>
                    </div>

                    <p class="description">{{lot.description}}</p>

                    <div class="price-info">
                        <span class="price">${{lot.price.toFixed(2)}}</span>
                        <span class="unit">/kg</span>
                    </div>

                    <p class="min-order">Min order: {{lot.minOrder}} kg</p>

                    <button class="add-to-cart-btn" (click)="addToCart(lot)">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13C6.44772 13 6 13.4477 6 14C6 14.5523 6.44772 15 7 15H19M7 18C6.44772 18 6 18.4477 6 19C6 19.5523 6.44772 20 7 20C7.55228 20 8 19.5523 8 19C8 18.4477 7.55228 18 7 18ZM17 18C16.4477 18 16 18.4477 16 19C16 19.5523 16.4477 20 17 20C17.5523 20 18 19.5523 18 19C18 18.4477 17.5523 18 17 18Z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Add to Cart ({{lot.minOrder}} kg)
                    </button>
                </div>
            </div>
        </div>

        <!-- Cart Sidebar -->
        <div class="cart-sidebar" *ngIf="showCart">
            <div class="cart-header">
                <h3>Your Cart</h3>
                <span class="item-count">{{cartItems.length}} items</span>
            </div>

            <div class="cart-items">
                <div class="cart-item" *ngFor="let item of cartItems">
                    <div class="item-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#CBD5E1" stroke-width="2" />
                        </svg>
                    </div>
                    <div class="item-details">
                        <h4>{{item.name}}</h4>
                        <p>${{item.price.toFixed(2)}}/kg</p>
                        <div class="quantity-controls">
                            <button>-</button>
                            <span>{{item.quantity}} kg</span>
                            <button>+</button>
                        </div>
                    </div>
                    <div class="item-price">
                        <p>${{item.total.toFixed(2)}}</p>
                        <button class="remove-btn">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M19 7L18.1327 19.1425C18.0579 20.1891 17.187 21 16.1378 21H7.86224C6.81296 21 5.94208 20.1891 5.86732 19.1425L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="cart-footer">
                <div class="summary-row">
                    <span>Subtotal (17 kg)</span>
                    <span>${{calculateSubtotal().toFixed(2)}}</span>
                </div>
                <div class="summary-row">
                    <span>Delivery Charge</span>
                    <span>$15.00</span>
                </div>
                <div class="summary-row">
                    <span>Platform Fee (2.5%)</span>
                    <span>$5.85</span>
                </div>
                <div class="summary-row grand-total">
                    <span>Grand Total</span>
                    <span>${{calculateTotal().toFixed(2)}}</span>
                </div>

                <button class="checkout-btn">
                    Place Order â€” ${{calculateTotal().toFixed(2)}}
                </button>

                <button class="clear-cart-btn">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Clear Cart
                </button>
            </div>
        </div>
    </div>
</div>